<!--[onload;tplvars;cand='NetOwnerCandidateProfileEdit?pPersonID';candquest='F_questions_div?ptaglocation=P&pid']-->

<script type="text/javascript">
	$(document).ready(function(){
		IQXInitSection("form");
		$(".questionnaire").questionnaire();
		if ($('#cand_personid').val() == '') {OwnerCandidateProfileEdit();}	// if form is empty then new candidate so unlock
		
	});
	
	function OwnerCandidateProfileEdit(){
		// ## enable form. using directly in button action with 'this.form' enables all forms on page
		
		IQXEnableForm($('#OwnerFormCandidateEdit'), {
			successhandler: function(){
				IQXDisableForm();
				$('submit').hide();
				$('#OwnerCandMaintEditPopupDiv').dialog('destroy');
			}
		});
	}
	
</script>

<div class="usertext">[onload;file=txt_candidate_profile_top.html;noerr]</div>
<form id="OwnerFormCandidateEdit" name="OwnerFormCandidateEdit" action="IQXPost.php?proc=NetOwnerCandidateProfileSet" method="POST" accept-charset="utf-8">
    <div class="ButtonGroup" align="right">
    	<button type="button" id="cand_edit" class="fixed nonformbutton" onclick="OwnerCandidateProfileEdit()">Edit</button>
        <button type="submit" id="cand_submit" class="fixed formbutton" >Save</button>
		<button type="button" id="cand_Bank" class="fixed nonformbutton" onClick="CandMaintEditButtonClick('Bank',$('#cand_personid').val())" >Bank Details</button>
        <button type="button" id="cand_reset" class="fixed formbutton" onclick="IQXDisableForm()" >Undo</button>
		<button type="button" id="cand_Cancel" class="fixed" onclick="OwnerCandidatePopupCancelButton()" >Close</button>
	</div>
	<span class="errormessage">[var.x_errormessage]</span>
    <fieldset class="regular">
        <input type="hidden" id="cand_personid" name="ppersonid" value="[cand.PersonID;block=fieldset]" />
        <input type="hidden" name="poldforenames" value="[cand.Forenames;noerr]" />
        <input type="hidden" name="poldsurname" value="[cand.Surname;noerr]" />
        <input type="hidden" name="poldgender" value="[cand.Gender;noerr]" />
        <input type="hidden" name="polddob" value="[cand.DOB;ope=iqx;shortdate;noerr]" />
        <input type="hidden" name="poldaddr1" value="[cand.Addr1;noerr]" />
        <input type="hidden" name="poldaddr2" value="[cand.Addr2;noerr]" />
        <input type="hidden" name="poldaddr3" value="[cand.Addr3;noerr]" />
        <input type="hidden" name="poldtown" value="[cand.Town;noerr]" />
        <input type="hidden" name="poldcounty" value="[cand.County;noerr]" />
        <input type="hidden" name="poldcountry" value="[cand.Country;noerr]" />
        <input type="hidden" name="poldpostcode" value="[cand.Postcode;noerr]" />
        <input type="hidden" name="poldhomephone" value="[cand.HomePhone;noerr]" />
        <input type="hidden" name="polddayphone" value="[cand.DayPhone;noerr]" />
        <input type="hidden" name="poldmobile" value="[cand.Mobile;noerr]" />
        <input type="hidden" name="poldemail" value="[cand.Email;noerr]" />
		<div class="questionnaire">
		<div class="qquestrow">
            <div class="qquestion">
                Forenames
            </div>
			<div class="qanswer">
            <input type="text" id="cand_forenames" name="pforenames" value="[cand.Forenames;noerr]" class="required qpseudoquestanswer" />
            </div>
        </div>
		<div class="qquestrow">
            <div class="qquestion">
                Surname
            </div>
			<div class="qanswer">
            <input type="text" id="cand_surname" name="psurname" value="[cand.Surname;noerr]" class="required qpseudoquestanswer" />
            </div>
        </div>
		<div class="qquestrow">
            <div class="qquestion">
                Gender
            </div>
			<div class="qanswer">
			<select id="cand_gender" name="pgender" class="required qpseudoquestanswer" >
				<option value="" ></option>
				<option value="F" [cand.Gender;noerr;if [val]='F';then 'selected="true"';else ''] >Female</option>
				<option value="M" [cand.Gender;noerr;if [val]='M';then 'selected="true"';else ''] >Male</option>
			</select>
            </div>
        </div>
		<div class="qquestrow">
            <div class="qquestion" >
                Date of Birth
            </div>
			<div class="qanswer" >
            	<input type="text" id="cand_dob" name="pDOB" value="[cand.DOB;ope=iqx;shortdate;noerr]" class="required dateofbirth qpseudoquestanswer" />
            </div>
        </div>
        <div class="qquestrow">
            <div class="qquestion">
                Home Telephone
            </div>
			<div class="qanswer">
            <input type="text" id="cand_home_phone" name="phomephone" value="[cand.HomePhone;noerr]" class="qpseudoquestanswer" />
            </div>
        </div>
        <div class="qquestrow">
            <div class="qquestion">
                Day Telephone
            </div>
			<div class="qanswer">
            <input type="text" id="cand_day_phone" name="pdayphone" value="[cand.DayPhone;noerr]" class="qpseudoquestanswer" />
            </div>
        </div>
        <div class="qquestrow">
            <div class="qquestion">
                Mobile
            </div>
			<div class="qanswer">
            <input type="text" id="cand_mobile" name="pmobile" value="[cand.Mobile;noerr]" class="qpseudoquestanswer" />
            </div>
        </div>
        <div class="qquestrow">
            <div class="qquestion">
                Email Address
            </div>
			<div class="qanswer">
            <input type="text" id="cand_email" name="pemail" value="[cand.Email;noerr]" class="email qpseudoquestanswer"  />
            </div>
        </div>
		<div class="qquestrow">
            <div class="qquestion">
                Address
            </div>
			<div class="qanswer">
            <input type="text" id="cand_addr1" name="paddr1" value="[cand.Addr1;noerr]" class="required qpseudoquestanswer" />
            </div>
        </div>
		<div class="qquestrow">
            <div class="qquestion">
                &nbsp;
            </div>
			<div class="qanswer">
            <input type="text" id="cand_addr2" name="paddr2" value="[cand.Addr2;noerr]" class="qpseudoquestanswer" />
            </div>
        </div>
		<div class="qquestrow">
            <div class="qquestion">
                &nbsp;
            </div>
			<div class="qanswer">
            <input type="text" id="cand_addr3" name="paddr3" value="[cand.Addr3;noerr]" class="qpseudoquestanswer" />
            </div>
        </div>
		<div class="qquestrow">
            <div class="qquestion">
                Town
            </div>
			<div class="qanswer">
            <input type="text" id="cand_town" name="ptown" value="[cand.Town;noerr]" class="required qpseudoquestanswer" />
            </div>
        </div>
		<div class="qquestrow">
            <div class="qquestion">
                County
            </div>
			<div class="qanswer">
            <input type="text" id="cand_county" name="pcounty" value="[cand.County;noerr]" class="qpseudoquestanswer" />
            </div>
        </div>
		<div class="qquestrow">
            <div class="qquestion">
                Country
            </div>
			<div class="qanswer">
            <input type="text" id="cand_country" name="pcountry" value="[cand.Country;noerr]" class="qpseudoquestanswer" />
            </div>
        </div>
		<div class="qquestrow">
            <div class="qquestion">
                Postcode
            </div>
			<div class="qanswer">
            <input type="text" id="cand_postcode" name="ppostcode" value="[cand.Postcode;noerr]" class="required uppercase qpseudoquestanswer" />
            </div>
        </div>
		</div>
		<div class="cleardiv" ></div>
	   	<div>[candquest;block=div]</div>  
	    <p>
            <button type="button" id="cand_edit" class="fixed nonformbutton" onclick="OwnerCandidateProfileEdit()">
                Edit
            </button>
            <button type="submit" id="cand_submit" class="fixed formbutton" >
                Save
            </button>
			<button type="button" id="cand_Bank" class="fixed nonformbutton" onClick="CandMaintEditButtonClick('Bank',$('#cand_personid').val())" >
                Bank Details
            </button>
            <button type="button" id="cand_reset" class="fixed formbutton" onclick="IQXDisableForm()" >
                Undo
            </button>
			<button type="button" id="cand_Cancel" class="fixed" onclick="OwnerCandidatePopupCancelButton()" >
                Close
            </button>
	    </p>
		<p>
	    		<span class="errormessage">[var.x_errormessage]</span>
		</p>
    </fieldset>
</form>

